<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Javascript Notebook</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="dist/react-table.css">
<link rel="stylesheet" type="text/css" href="dist/eclipse.css">
<link rel="stylesheet" type="text/css" href="dist/codemirror.css">
<link rel="stylesheet" type="text/css" href="dist/page.css">
</head>
<body>
<script id="jsmd" type="text/jsmd">
%% meta
{"title": "What a web notebook looks like",
"viewMode": "editor",
"lastExport": "2017-12-13T17:46:16.207Z",
"jsmdVersionHash": "example_hash_1234567890",
"jsmdPreviousVersionHash": "example_hash_prev_1234567890",
"ailerusAppVersion": "0.0.1",
"ailerusAppLocation": "https://some.cdn.com/path/version/ailerusApp.js"
}

%% md
## Markdown cell

This is written in a **Markdown cell**, which supports normal _MD formating)_


Markdown cells also support LaTeX

$$
\left[\begin{array}{c}
\mathbf{x}_{t,i}\\
\mathbf{v}_{t,i}\\
\theta_{t,i}\\
\omega_{t,i}
\end{array}\right]  =  \left[\begin{array}{c}
\mathbf{x}_{t-1,i}\\
\mathbf{v}_{t-1,i}\\
\theta_{t-1,i}\\
\omega_{t-1,i}
\end{array}\right]+\Delta\left[\begin{array}{c}
\mathbf{v}_{t-1,i}\\
\left(T_{t,i}+\epsilon_{T}\right)cos\left(\theta_{t-1,i}\right)-\rho_{\mathbf{v}}\left\Vert \mathbf{v}_{t-1,i}\right\Vert ^{2}\frac{\mathbf{v}_{t-1,i}}{\left\Vert \mathbf{v}_{t-1,i}\right\Vert }\\
\left(T_{t,i}+\epsilon_{T}\right)sin\left(\theta_{t-1,i}\right)-\rho_{\mathbf{v}}\left\Vert \mathbf{v}_{t-1,i}\right\Vert ^{2}\frac{\mathbf{v}_{t-1,i}}{\left\Vert \mathbf{v}_{t-1,i}\right\Vert }\\
\omega_{t-1,i}\\
Y_{t,i}-\rho_{\omega}\omega_{t-1,i}^{2}+\epsilon_{Y}
\end{array}\right]
$$

`shift+enter` evaluates a cell and moves to the next.

%% js
// this is a JS code cell. We can use normal JS and browser APIs.
// try `ctrl+enter` a few times to evaluate without advancing
range = []
for (let i=0; i<10; i++){range.push(i)}
A = range.map( (x,i) => range.map( (y,j) => (Math.random()+i-.5)))

%% raw
this is a raw cell. it's available in jupyter, so we have it too. not clear what the use case is, but it's here in case you want it.
notice that raw cells don't wrap (unlike MD cell editors)

%% md
## External resource cell
the cell below allows you to load external scripts

%% resource
https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.min.js

%% js
// now let's define a JS function that does something cool.
// the function below will make a cube spin around in the DOM element specified
// by the query selector that is given as an argument

function spinCubeInTarget(targetSelector) {
    //'use strict';
    var width = 400, height = 300
    var scene = new THREE.Scene();
    var camera = new THREE.PerspectiveCamera(75, width/height, 0.1, 100);
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);
    document.body.querySelector(targetSelector).appendChild(renderer.domElement);
    var geometry = new THREE.CubeGeometry(5, 5, 5);
    var material = new THREE.MeshLambertMaterial({color: 0x00fff0 });
    var cube = new THREE.Mesh(geometry, material);
    scene.add(cube);
    camera.position.z = 12; 
    var pointLight = new THREE.PointLight(0xFFFFFF);
    pointLight.position.z = 130;
    scene.add(pointLight);
    var reqAnimFrame = window.requestAnimationFrame
    var render = function() {
        reqAnimFrame(render);
        var delta = Math.random() * (0.06 - 0.02) + 0.03;
        cube.rotation.x += delta;
        cube.rotation.y += delta;
        renderer.render(scene, camera);
    };
    render();
}

%% md
### Demo of targeting elements within a markdown cell
Markdown supports inline HTML, so we can put a div in the flow of our narrative, and target that div with normal browser APIs. Below this paragraph is a div with id="targetDiv":
<div id="targetDiv"></div>
We'll target that div with the THREE.js example we defined above.

%% js
spinCubeInTarget("#targetDiv")

%% dom
div#dom-cell-2

%% js
// above this is a DOM cell, which we can also target
spinCubeInTarget("#dom-cell-2")
</script>
<div id='page'></div>
<script src='dist/bundle.js'></script>
</body>
</html>